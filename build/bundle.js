var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,c;function o(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function u(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function l(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function p(){return m(" ")}function g(){return m("")}function v(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function R(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function F(e){c=e}const j=[],x=[],P=[],w=[],_=Promise.resolve();let E=!1;function O(e){P.push(e)}const D=new Set;let T=0;function N(){const e=c;do{for(;T<j.length;){const e=j[T];T++,F(e),I(e.$$)}for(F(null),j.length=0,T=0;x.length;)x.pop()();for(let e=0;e<P.length;e+=1){const t=P[e];D.has(t)||(D.add(t),t())}P.length=0}while(j.length);for(;w.length;)w.pop()();E=!1,D.clear(),F(e)}function I(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const k=new Set;let A;function S(){A={r:0,c:[],p:A}}function H(){A.r||r(A.c),A=A.p}function q(e,t){e&&e.i&&(k.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(k.has(e))return;k.add(e),A.c.push((()=>{k.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function C(e){e&&e.c()}function $(e,n,a,s){const{fragment:c,on_mount:o,on_destroy:u,after_update:f}=e.$$;c&&c.m(n,a),s||O((()=>{const n=o.map(t).filter(i);u?u.push(...n):r(n),e.$$.on_mount=[]})),f.forEach(O)}function L(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function B(e,t){-1===e.$$.dirty[0]&&(j.push(e),E||(E=!0,_.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(t,i,a,s,o,u,f,l=[-1]){const d=c;F(t);const m=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:l,skip_bound:!1,root:i.target||d.$$.root};f&&f(m.root);let p=!1;if(m.ctx=a?a(t,i.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return m.ctx&&o(m.ctx[e],m.ctx[e]=i)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](i),p&&B(t,e)),n})):[],m.update(),p=!0,r(m.before_update),m.fragment=!!s&&s(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(h)}else m.fragment&&m.fragment.c();i.intro&&q(t.$$.fragment),$(t,i.target,i.anchor,i.customElement),N()}F(d)}class U{$destroy(){L(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function z(e,t,n){const r=e.slice();return r[8]=t[n],r}function V(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function J(e){let t,n=e[3](e[1],e[0].name),r=[];for(let t=0;t<n.length;t+=1)r[t]=X(z(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=g()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);f(e,t,n)},p(e,i){if(15&i){let a;for(n=e[3](e[1],e[0].name),a=0;a<n.length;a+=1){const s=z(e,n,a);r[a]?r[a].p(s,i):(r[a]=X(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(e){l(r,e),e&&h(t)}}}function W(e){let t,n,r,i,a=e[8].name+"",s=e[8].count+"";return{c(){t=m(a),n=p(),r=d("span"),i=m(s),y(r,"class","svelte-1edxw97")},m(e,a){f(e,t,a),f(e,n,a),f(e,r,a),u(r,i)},p(e,n){3&n&&a!==(a=e[8].name+"")&&R(t,a),3&n&&s!==(s=e[8].count+"")&&R(i,s)},d(e){e&&h(t),e&&h(n),e&&h(r)}}}function K(e){let t,n,r,i,a,s=e[8].count+"",c={length:5},o=[];for(let t=0;t<c.length;t+=1)o[t]=G(V(e,c,t));return{c(){t=d("div"),n=d("div");for(let e=0;e<o.length;e+=1)o[e].c();r=p(),i=d("span"),a=m(s),y(n,"class","hit-stars svelte-1edxw97"),y(i,"class","svelte-1edxw97"),y(t,"class","stars-wrapper svelte-1edxw97")},m(e,s){f(e,t,s),u(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null);u(t,r),u(t,i),u(i,a)},p(e,t){if(11&t){let r;for(c={length:5},r=0;r<c.length;r+=1){const i=V(e,c,r);o[r]?o[r].p(i,t):(o[r]=G(i),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=c.length}3&t&&s!==(s=e[8].count+"")&&R(a,s)},d(e){e&&h(t),l(o,e)}}}function G(e){let t,n;return{c(){t=d("div"),y(t,"class",n="star-"+(e[13]+1)+" "+Y(e[13]+1,e[8].name)+" svelte-1edxw97")},m(e,n){f(e,t,n)},p(e,r){3&r&&n!==(n="star-"+(e[13]+1)+" "+Y(e[13]+1,e[8].name)+" svelte-1edxw97")&&y(t,"class",n)},d(e){e&&h(t)}}}function X(e){let t,n,r,i,a,s;function c(e,t){return"stars_count"===e[0].name?K:W}let o=c(e),l=o(e);function m(){return e[5](e[8])}return{c(){t=d("li"),l.c(),n=p(),y(t,"class",r="facet"+(e[8].isRefined?" checked":"")+" svelte-1edxw97"),y(t,"id",i=e[8].name)},m(e,r){f(e,t,r),l.m(t,null),u(t,n),a||(s=v(t,"click",m),a=!0)},p(a,s){o===(o=c(e=a))&&l?l.p(e,s):(l.d(1),l=o(e),l&&(l.c(),l.m(t,n))),3&s&&r!==(r="facet"+(e[8].isRefined?" checked":"")+" svelte-1edxw97")&&y(t,"class",r),3&s&&i!==(i=e[8].name)&&y(t,"id",i)},d(e){e&&h(t),l.d(),a=!1,s()}}}function Z(t){let n,r,i,a,s,c,o,l=t[0].label+"",g=t[1]&&J(t);return{c(){n=d("div"),r=d("div"),i=m(l),a=p(),s=d("div"),c=d("ul"),g&&g.c(),y(r,"class","facet-list-name svelte-1edxw97"),y(c,"class","facet-list svelte-1edxw97"),y(c,"id",o=t[0].name),y(s,"class","facet-list-wrapper svelte-1edxw97")},m(e,t){f(e,n,t),u(n,r),u(r,i),u(n,a),u(n,s),u(s,c),g&&g.m(c,null)},p(e,[t]){1&t&&l!==(l=e[0].label+"")&&R(i,l),e[1]?g?g.p(e,t):(g=J(e),g.c(),g.m(c,null)):g&&(g.d(1),g=null),1&t&&o!==(o=e[0].name)&&y(c,"id",o)},i:e,o:e,d(e){e&&h(n),g&&g.d()}}}function Y(e,t){return`${e<=Math.floor(t)?"full":""} ${e>Math.floor(t)&&e<=Math.ceil(t)&&t-Math.floor(t)>.3?"half":""}`}function ee(e,t,n){let{facets:r}=t,{results:i}=t,{helper:a}=t,s={};function c(e,t){"stars_count"===e?s[t].forEach((t=>a.toggleRefinement(e,t))):a.toggleRefinement(e,t),a.search()}return e.$$set=e=>{"facets"in e&&n(0,r=e.facets),"results"in e&&n(1,i=e.results),"helper"in e&&n(4,a=e.helper)},[r,i,c,function(e,t){const n=e.getFacetValues(t);var r;return"stars_count"===t?(r=n,[0,1,2,3,4,5].map((e=>{const t=new RegExp(`^${e}.*`),n=r.filter((e=>t.test(e.name))),i=n.reduce(((e,t)=>(e.count+=t.count,e.isRefined=e.isRefined||t.isRefined,e)),{name:`${e}`,count:0,isRefined:!1});return s[e]=n.map((e=>e.name)),i})).filter((e=>e.count))):n},a,e=>c(r.name,e.name)]}class te extends U{constructor(e){super(),M(this,e,ee,Z,a,{facets:0,results:1,helper:4})}}function ne(e,t,n){const r=e.slice();return r[1]=t[n],r[3]=n,r}function re(e){let t,n;return{c(){t=d("div"),y(t,"class",n="star-"+(e[3]+1)+" "+ae(e[3]+1,e[0].stars_count.value)+" svelte-1fl5qgr")},m(e,n){f(e,t,n)},p(e,r){1&r&&n!==(n="star-"+(e[3]+1)+" "+ae(e[3]+1,e[0].stars_count.value)+" svelte-1fl5qgr")&&y(t,"class",n)},d(e){e&&h(t)}}}function ie(t){let n,r,i,a,s,c,g,v,b,F,j,x,P,w,_,E,O,D,T,N,I,k,A,S,H,q,Q=t[0].name.value+"",C=t[0].stars_count.value+"",$=t[0].reviews_count.value+"",L=t[0].food_type.value+"",B=t[0].neighborhood.value+"",M=t[0].price_range.value+"",U=t[0].dining_style.value+"",z={length:5},V=[];for(let e=0;e<z.length;e+=1)V[e]=re(ne(t,z,e));return{c(){n=d("li"),r=d("a"),i=d("img"),s=p(),c=d("div"),g=d("div"),v=p(),b=d("div"),F=d("span"),j=m(C),x=p(),P=d("div");for(let e=0;e<V.length;e+=1)V[e].c();w=m("\n\t\t\t\t("),_=m($),E=m(" reviews)"),O=p(),D=d("div"),T=d("span"),N=d("span"),I=d("span"),k=p(),A=d("div"),S=p(),H=d("a"),o(i.src,a="https://resizer.otstatic.com/v2/profiles/legacy/"+t[0].reserve_url.value.replace(/^.*\?rid=/,"")+".jpg")||y(i,"src",a),y(i,"class","svelte-1fl5qgr"),y(g,"class","hit-name svelte-1fl5qgr"),y(P,"class","hit-stars svelte-1fl5qgr"),y(b,"class","hit-reviews svelte-1fl5qgr"),y(N,"class","middle svelte-1fl5qgr"),y(D,"class","hit-info svelte-1fl5qgr"),y(A,"class","hit-cuisine"),y(c,"class","hit-container svelte-1fl5qgr"),y(r,"class","hit-a svelte-1fl5qgr"),y(r,"href",q=t[0].reserve_url.value),y(n,"class","hit svelte-1fl5qgr")},m(e,t){f(e,n,t),u(n,r),u(r,i),u(r,s),u(r,c),u(c,g),g.innerHTML=Q,u(c,v),u(c,b),u(b,F),u(F,j),u(b,x),u(b,P);for(let e=0;e<V.length;e+=1)V[e].m(P,null);u(b,w),u(b,_),u(b,E),u(c,O),u(c,D),u(D,T),T.innerHTML=L,u(D,N),N.innerHTML=B,u(D,I),I.innerHTML=M,u(c,k),u(c,A),A.innerHTML=U,u(r,S),u(r,H)},p(e,[t]){if(1&t&&!o(i.src,a="https://resizer.otstatic.com/v2/profiles/legacy/"+e[0].reserve_url.value.replace(/^.*\?rid=/,"")+".jpg")&&y(i,"src",a),1&t&&Q!==(Q=e[0].name.value+"")&&(g.innerHTML=Q),1&t&&C!==(C=e[0].stars_count.value+"")&&R(j,C),1&t){let n;for(z={length:5},n=0;n<z.length;n+=1){const r=ne(e,z,n);V[n]?V[n].p(r,t):(V[n]=re(r),V[n].c(),V[n].m(P,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=z.length}1&t&&$!==($=e[0].reviews_count.value+"")&&R(_,$),1&t&&L!==(L=e[0].food_type.value+"")&&(T.innerHTML=L),1&t&&B!==(B=e[0].neighborhood.value+"")&&(N.innerHTML=B),1&t&&M!==(M=e[0].price_range.value+"")&&(I.innerHTML=M),1&t&&U!==(U=e[0].dining_style.value+"")&&(A.innerHTML=U),1&t&&q!==(q=e[0].reserve_url.value)&&y(r,"href",q)},i:e,o:e,d(e){e&&h(n),l(V,e)}}}function ae(e,t){return`${e<=Math.floor(t)?"full":""} ${e>Math.floor(t)&&e<=Math.ceil(t)&&t-Math.floor(t)>.3?"half":""}`}function se(e,t,n){let{hit:r}=t;return e.$$set=e=>{"hit"in e&&n(0,r=e.hit)},[r]}class ce extends U{constructor(e){super(),M(this,e,se,ie,a,{hit:0})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;
/*! algoliasearch.umd.js | 4.13.0 | Â© Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
var oe,ue,fe=(oe=function(e,t){e.exports=function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(r().getItem(n)||"{}")};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var n=JSON.stringify(e),r=a()[n];return Promise.all([r||t(),void 0!==r])})).then((function(e){var t=i(e,2),r=t[0],a=t[1];return Promise.all([r,a||n.miss(r)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var i=a();return i[JSON.stringify(e)]=t,r().setItem(n,JSON.stringify(i)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],r().setItem(n,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){r().removeItem(n)}))}}}function c(e){var t=a(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then((function(e){return Promise.all([e,n.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch((function(){return c({caches:t}).get(e,r,i)}))},set:function(e,r){return n.set(e,r).catch((function(){return c({caches:t}).set(e,r)}))},delete:function(e){return n.delete(e).catch((function(){return c({caches:t}).delete(e)}))},clear:function(){return n.clear().catch((function(){return c({caches:t}).clear()}))}}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(n);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var s=r(),c=i&&i.miss||function(){return Promise.resolve()};return s.then((function(e){return c(e)})).then((function(){return s}))},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function u(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===p.WithinHeaders?r:{}},queryParameters:function(){return e===p.WithinQueryParameters?r:{}}}}function f(e){var t=0;return e((function n(){return t++,new Promise((function(r){setTimeout((function(){r(e(n))}),Math.min(100*t,1e3))}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(n){return h(e.then((function(e){return Promise.all([t(e,n),e])})).then((function(e){return e[1]})))}})}function l(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function d(e,t){return t?(Object.keys(t).forEach((function(n){e[n]=t[n](e)})),e):e}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}var p={WithinQueryParameters:0,WithinHeaders:1};function g(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])})),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var v={Read:1,Write:2,Any:3},y=1,R=2,b=3;function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function j(e){return"string"==typeof e?{protocol:"https",url:e,accept:v.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||v.Any}}var x="DELETE",P="GET",w="POST",_="PUT";function E(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(F(t))}))}))).then((function(e){var n=e.filter((function(e){return function(e){return e.status===y||Date.now()-e.lastUpdate>12e4}(e)})),r=e.filter((function(e){return function(e){return e.status===b&&Date.now()-e.lastUpdate<=12e4}(e)})),i=[].concat(a(n),a(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:i.length>0?i.map((function(e){return j(e)})):t}}))}function O(e,t,r,i){var s=[],c=function(e,t){if(e.method!==P&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,i),o=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach((function(e){var t=r[e];i[e.toLowerCase()]=t})),i}(e,i),u=r.method,f=r.method!==P?{}:n(n({},r.data),i.data),h=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),f),i.queryParameters),l=0,d=function t(n,a){var f=n.pop();if(void 0===f)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:k(s)};var d={data:c,headers:o,method:u,url:N(f,r.path,h),connectTimeout:a(l,e.timeouts.connect),responseTimeout:a(l,i.timeout)},m=function(e){var t={request:d,response:e,host:f,triesLeft:n.length};return s.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var i=m(r);return r.isTimedOut&&l++,Promise.all([e.logger.info("Retryable failure",A(i)),e.hostsCache.set(f,F(f,r.isTimedOut?b:R))]).then((function(){return t(n,a)}))},onFail:function(e){throw m(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,k(s))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,n=e.status;return!t&&0==~~n}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return E(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function D(e){var t=e.hostsCache,n=e.logger,r=e.requester,a=e.requestsCache,s=e.responsesCache,c=e.timeouts,o=e.userAgent,u=e.hosts,f=e.queryParameters,h={hostsCache:t,logger:n,requester:r,requestsCache:a,responsesCache:s,timeouts:c,userAgent:o,headers:e.headers,queryParameters:f,hosts:u.map((function(e){return j(e)})),read:function(e,t){var n=g(t,h.timeouts.read),r=function(){return O(h,h.hosts.filter((function(e){return 0!=(e.accept&v.Read)})),e,n)};if(!0!==(void 0!==n.cacheable?n.cacheable:e.cacheable))return r();var a={request:e,mappedRequestOptions:n,transporter:{queryParameters:h.queryParameters,headers:h.headers}};return h.responsesCache.get(a,(function(){return h.requestsCache.get(a,(function(){return h.requestsCache.set(a,r()).then((function(e){return Promise.all([h.requestsCache.delete(a),e])}),(function(e){return Promise.all([h.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=i(e,2);return t[0],t[1]}))}))}),{miss:function(e){return h.responsesCache.set(a,e)}})},write:function(e,t){return O(h,h.hosts.filter((function(e){return 0!=(e.accept&v.Write)})),e,g(t,h.timeouts.write))}};return h}function T(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function N(e,t,n){var r=I(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function I(e){return Object.keys(e).map((function(t){return m("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n})).join("&")}function k(e){return e.map((function(e){return A(e)}))}function A(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var S=function(e){return function(t,n){return e.transporter.write({method:w,path:"2/abtests",data:t},n)}},H=function(e){return function(t,n){return e.transporter.write({method:x,path:m("2/abtests/%s",t)},n)}},q=function(e){return function(t,n){return e.transporter.read({method:P,path:m("2/abtests/%s",t)},n)}},Q=function(e){return function(t){return e.transporter.read({method:P,path:"2/abtests"},t)}},C=function(e){return function(t,n){return e.transporter.write({method:w,path:m("2/abtests/%s/stop",t)},n)}},$=function(e){return function(t){return e.transporter.read({method:P,path:"1/strategies/personalization"},t)}},L=function(e){return function(t,n){return e.transporter.write({method:w,path:"1/strategies/personalization",data:t},n)}};function B(e){return function t(n){return e.request(n).then((function(r){if(void 0!==e.batch&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})}))}({})}var M=function(e){return function(t,i){var a=i||{},s=a.queryParameters,c=r(a,["queryParameters"]),o=n({acl:t},void 0!==s?{queryParameters:s}:{});return h(e.transporter.write({method:w,path:"1/keys",data:o},c),(function(t,n){return f((function(r){return ee(e)(t.key,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},U=function(e){return function(t,n,r){var i=g(r);return i.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:w,path:"1/clusters/mapping",data:{cluster:n}},i)}},z=function(e){return function(t,n,r){return e.transporter.write({method:w,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},V=function(e){return function(t,n){return h(e.transporter.write({method:w,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},n),(function(t,n){return we(e)(t.taskID,n)}))}},J=function(e){return function(t,n,r){return h(e.transporter.write({method:w,path:m("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),(function(n,r){return ce(e)(t,{methods:{waitTask:ht}}).waitTask(n.taskID,r)}))}},W=function(e){return function(t,r,i){return J(e)(t,r,n(n({},i),{},{scope:[dt.Rules]}))}},K=function(e){return function(t,r,i){return J(e)(t,r,n(n({},i),{},{scope:[dt.Settings]}))}},G=function(e){return function(t,r,i){return J(e)(t,r,n(n({},i),{},{scope:[dt.Synonyms]}))}},X=function(e){return function(t,n){return t.method===P?e.transporter.read(t,n):e.transporter.write(t,n)}},Z=function(e){return function(t,n){return h(e.transporter.write({method:x,path:m("1/keys/%s",t)},n),(function(n,r){return f((function(n){return ee(e)(t,r).then(n).catch((function(e){if(404!==e.status)throw e}))}))}))}},Y=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"deleteEntry",body:{objectID:e}}}));return h(e.transporter.write({method:w,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return we(e)(t.taskID,n)}))}},ee=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/keys/%s",t)},n)}},te=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/task/%s",t.toString())},n)}},ne=function(e){return function(t){return e.transporter.read({method:P,path:"/1/dictionaries/*/settings"},t)}},re=function(e){return function(t){return e.transporter.read({method:P,path:"1/logs"},t)}},ie=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters/mapping/top"},t)}},ae=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/clusters/mapping/%s",t)},n)}},se=function(e){return function(t){var n=t||{},i=n.retrieveMappings,a=r(n,["retrieveMappings"]);return!0===i&&(a.getClusters=!0),e.transporter.read({method:P,path:"1/clusters/mapping/pending"},a)}},ce=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d({transporter:e.transporter,appId:e.appId,indexName:t},n.methods)}},oe=function(e){return function(t){return e.transporter.read({method:P,path:"1/keys"},t)}},ue=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters"},t)}},fe=function(e){return function(t){return e.transporter.read({method:P,path:"1/indexes"},t)}},he=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters/mapping"},t)}},le=function(e){return function(t,n,r){return h(e.transporter.write({method:w,path:m("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),(function(n,r){return ce(e)(t,{methods:{waitTask:ht}}).waitTask(n.taskID,r)}))}},de=function(e){return function(t,n){return h(e.transporter.write({method:w,path:"1/indexes/*/batch",data:{requests:t}},n),(function(t,n){return Promise.all(Object.keys(t.taskID).map((function(r){return ce(e)(r,{methods:{waitTask:ht}}).waitTask(t.taskID[r],n)})))}))}},me=function(e){return function(t,n){return e.transporter.read({method:w,path:"1/indexes/*/objects",data:{requests:t}},n)}},pe=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{params:I(e.params||{})})}));return e.transporter.read({method:w,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},ge=function(e){return function(t,i){return Promise.all(t.map((function(t){var a=t.params,s=a.facetName,c=a.facetQuery,o=r(a,["facetName","facetQuery"]);return ce(e)(t.indexName,{methods:{searchForFacetValues:ct}}).searchForFacetValues(s,c,n(n({},i),o))})))}},ve=function(e){return function(t,n){var r=g(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:x,path:"1/clusters/mapping"},r)}},ye=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:w,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:i}},r),(function(t,n){return we(e)(t.taskID,n)}))}},Re=function(e){return function(t,n){return h(e.transporter.write({method:w,path:m("1/keys/%s/restore",t)},n),(function(n,r){return f((function(n){return ee(e)(t,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},be=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return h(e.transporter.write({method:w,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return we(e)(t.taskID,n)}))}},Fe=function(e){return function(t,n,r){return e.transporter.read({method:w,path:m("/1/dictionaries/%s/search",t),data:{query:n},cacheable:!0},r)}},je=function(e){return function(t,n){return e.transporter.read({method:w,path:"1/clusters/mapping/search",data:{query:t}},n)}},xe=function(e){return function(t,n){return h(e.transporter.write({method:_,path:"/1/dictionaries/*/settings",data:t},n),(function(t,n){return we(e)(t.taskID,n)}))}},Pe=function(e){return function(t,n){var i=Object.assign({},n),a=n||{},s=a.queryParameters,c=r(a,["queryParameters"]),o=s?{queryParameters:s}:{},u=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return h(e.transporter.write({method:_,path:m("1/keys/%s",t),data:o},c),(function(n,r){return f((function(n){return ee(e)(t,r).then((function(e){return function(e){return Object.keys(i).filter((function(e){return-1!==u.indexOf(e)})).every((function(t){return e[t]===i[t]}))}(e)?Promise.resolve():n()}))}))}))}},we=function(e){return function(t,n){return f((function(r){return te(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},_e=function(e){return function(t,n){return h(e.transporter.write({method:w,path:m("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),(function(t,n){return ht(e)(t.taskID,n)}))}},Ee=function(e){return function(t){return B(n(n({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(n){return e.transporter.read({method:w,path:m("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},Oe=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return ot(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},De=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return ut(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Te=function(e){return function(t,n,i){var a=i||{},s=a.batchSize,c=r(a,["batchSize"]),o={taskIDs:[],objectIDs:[]};return h(function r(){var i,a=[];for(i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i<t.length&&(a.push(t[i]),a.length!==(s||1e3));i++);return 0===a.length?Promise.resolve(o):_e(e)(a.map((function(e){return{action:n,body:e}})),c).then((function(e){return o.objectIDs=o.objectIDs.concat(e.objectIDs),o.taskIDs.push(e.taskID),i++,r(i)}))}(),(function(t,n){return Promise.all(t.taskIDs.map((function(t){return ht(e)(t,n)})))}))}},Ne=function(e){return function(t){return h(e.transporter.write({method:w,path:m("1/indexes/%s/clear",e.indexName)},t),(function(t,n){return ht(e)(t.taskID,n)}))}},Ie=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,a=g(r(n,["forwardToReplicas"]));return i&&(a.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:w,path:m("1/indexes/%s/rules/clear",e.indexName)},a),(function(t,n){return ht(e)(t.taskID,n)}))}},ke=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,a=g(r(n,["forwardToReplicas"]));return i&&(a.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:w,path:m("1/indexes/%s/synonyms/clear",e.indexName)},a),(function(t,n){return ht(e)(t.taskID,n)}))}},Ae=function(e){return function(t,n){return h(e.transporter.write({method:w,path:m("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),(function(t,n){return ht(e)(t.taskID,n)}))}},Se=function(e){return function(t){return h(e.transporter.write({method:x,path:m("1/indexes/%s",e.indexName)},t),(function(t,n){return ht(e)(t.taskID,n)}))}},He=function(e){return function(t,n){return h(qe(e)([t],n).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},qe=function(e){return function(t,n){var r=t.map((function(e){return{objectID:e}}));return Te(e)(r,lt.DeleteObject,n)}},Qe=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:x,path:m("1/indexes/%s/rules/%s",e.indexName,t)},s),(function(t,n){return ht(e)(t.taskID,n)}))}},Ce=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:x,path:m("1/indexes/%s/synonyms/%s",e.indexName,t)},s),(function(t,n){return ht(e)(t.taskID,n)}))}},$e=function(e){return function(t){return Je(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Le=function(e){return function(t,n,r){return e.transporter.read({method:w,path:m("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},Be=function(e){return function(t,a){var s=a||{},c=s.query,o=s.paginate,u=r(s,["query","paginate"]),f=0;return function r(){return st(e)(c||"",n(n({},u),{},{page:f})).then((function(e){for(var n=0,a=Object.entries(e.hits);n<a.length;n++){var s=i(a[n],2),c=s[0],u=s[1];if(t(u))return{object:u,position:parseInt(c,10),page:f}}if(f++,!1===o||f>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},Me=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/indexes/%s/%s",e.indexName,t)},n)}},Ue=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var a=i(r[n],2),s=a[0];if(a[1].objectID===t)return parseInt(s,10)}return-1}},ze=function(e){return function(t,i){var a=i||{},s=a.attributesToRetrieve,c=r(a,["attributesToRetrieve"]),o=t.map((function(t){return n({indexName:e.indexName,objectID:t},s?{attributesToRetrieve:s}:{})}));return e.transporter.read({method:w,path:"1/indexes/*/objects",data:{requests:o}},c)}},Ve=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/indexes/%s/rules/%s",e.indexName,t)},n)}},Je=function(e){return function(t){return e.transporter.read({method:P,path:m("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},We=function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},Ke=function(e){return function(t,n){return h(Ge(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},Ge=function(e){return function(t,n){var i=n||{},a=i.createIfNotExists,s=r(i,["createIfNotExists"]),c=a?lt.PartialUpdateObject:lt.PartialUpdateObjectNoCreate;return Te(e)(t,c,s)}},Xe=function(e){return function(t,s){var c=s||{},o=c.safe,u=c.autoGenerateObjectIDIfNotExist,f=c.batchSize,l=r(c,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),d=function(t,n,r,i){return h(e.transporter.write({method:w,path:m("1/indexes/%s/operation",t),data:{operation:r,destination:n}},i),(function(t,n){return ht(e)(t.taskID,n)}))},p=Math.random().toString(36).substring(7),g="".concat(e.indexName,"_tmp_").concat(p),v=tt({appId:e.appId,transporter:e.transporter,indexName:g}),y=[],R=d(e.indexName,g,"copy",n(n({},l),{},{scope:["settings","synonyms","rules"]}));return y.push(R),h((o?R.wait(l):R).then((function(){var e=v(t,n(n({},l),{},{autoGenerateObjectIDIfNotExist:u,batchSize:f}));return y.push(e),o?e.wait(l):e})).then((function(){var t=d(g,e.indexName,"move",l);return y.push(t),o?t.wait(l):t})).then((function(){return Promise.all(y)})).then((function(e){var t=i(e,3),n=t[0],r=t[1],s=t[2];return{objectIDs:r.objectIDs,taskIDs:[n.taskID].concat(a(r.taskIDs),[s.taskID])}})),(function(e,t){return Promise.all(y.map((function(e){return e.wait(t)})))}))}},Ze=function(e){return function(t,r){return rt(e)(t,n(n({},r),{},{clearExistingRules:!0}))}},Ye=function(e){return function(t,r){return at(e)(t,n(n({},r),{},{clearExistingSynonyms:!0}))}},et=function(e){return function(t,n){return h(tt(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ht(e)(t.taskID,n)}))}},tt=function(e){return function(t,n){var i=n||{},a=i.autoGenerateObjectIDIfNotExist,s=r(i,["autoGenerateObjectIDIfNotExist"]),c=a?lt.AddObject:lt.UpdateObject;if(c===lt.UpdateObject){var o=!0,u=!1,f=void 0;try{for(var l,d=t[Symbol.iterator]();!(o=(l=d.next()).done);o=!0)if(void 0===l.value.objectID)return h(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(e){u=!0,f=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw f}}}return Te(e)(t,c,s)}},nt=function(e){return function(t,n){return rt(e)([t],n)}},rt=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,s=i.clearExistingRules,c=g(r(i,["forwardToReplicas","clearExistingRules"]));return a&&(c.queryParameters.forwardToReplicas=1),s&&(c.queryParameters.clearExistingRules=1),h(e.transporter.write({method:w,path:m("1/indexes/%s/rules/batch",e.indexName),data:t},c),(function(t,n){return ht(e)(t.taskID,n)}))}},it=function(e){return function(t,n){return at(e)([t],n)}},at=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,s=i.clearExistingSynonyms,c=i.replaceExistingSynonyms,o=g(r(i,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return a&&(o.queryParameters.forwardToReplicas=1),(c||s)&&(o.queryParameters.replaceExistingSynonyms=1),h(e.transporter.write({method:w,path:m("1/indexes/%s/synonyms/batch",e.indexName),data:t},o),(function(t,n){return ht(e)(t.taskID,n)}))}},st=function(e){return function(t,n){return e.transporter.read({method:w,path:m("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},ct=function(e){return function(t,n,r){return e.transporter.read({method:w,path:m("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},ot=function(e){return function(t,n){return e.transporter.read({method:w,path:m("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},ut=function(e){return function(t,n){return e.transporter.read({method:w,path:m("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},ft=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:_,path:m("1/indexes/%s/settings",e.indexName),data:t},s),(function(t,n){return ht(e)(t.taskID,n)}))}},ht=function(e){return function(t,n){return f((function(r){return function(e){return function(t,n){return e.transporter.read({method:P,path:m("1/indexes/%s/task/%s",e.indexName,t.toString())},n)}}(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},lt={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},dt={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},mt=1,pt=2,gt=3;function vt(e,t,r){var i,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return n.setRequestHeader(t,e.headers[t])}));var r,i=function(e,r){return setTimeout((function(){n.abort(),t({status:0,content:r,isTimedOut:!0})}),1e3*e)},a=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(a),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(a),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(a),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)}))}},logger:(i=gt,{debug:function(e,t){return mt>=i&&console.debug(e,t),Promise.resolve()},info:function(e,t){return pt>=i&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:o(),requestsCache:o({serializable:!1}),hostsCache:c({caches:[s({key:"".concat("4.13.0","-").concat(e)}),o()]}),userAgent:T("4.13.0").add({segment:"Browser"})},f=n(n({},a),r),h=function(){return function(e){return function(e){var t=e.region||"us",r=u(p.WithinHeaders,e.appId,e.apiKey),i=D(n(n({hosts:[{url:"personalization.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({appId:e.appId,transporter:i},e.methods)}(n(n(n({},a),e),{},{methods:{getPersonalizationStrategy:$,setPersonalizationStrategy:L}}))}};return function(e){var t=e.appId,r=u(void 0!==e.authMode?e.authMode:p.WithinHeaders,t,e.apiKey),i=D(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:v.Read},{url:"".concat(t,".algolia.net"),accept:v.Write}].concat(l([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({transporter:i,appId:t,addAlgoliaAgent:function(e,t){i.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},e.methods)}(n(n({},f),{},{methods:{search:pe,searchForFacetValues:ge,multipleBatch:de,multipleGetObjects:me,multipleQueries:pe,copyIndex:J,copySettings:K,copySynonyms:G,copyRules:W,moveIndex:le,listIndices:fe,getLogs:re,listClusters:ue,multipleSearchForFacetValues:ge,getApiKey:ee,addApiKey:M,listApiKeys:oe,updateApiKey:Pe,deleteApiKey:Z,restoreApiKey:Re,assignUserID:U,assignUserIDs:z,getUserID:ae,searchUserIDs:je,listUserIDs:he,getTopUserIDs:ie,removeUserID:ve,hasPendingMappings:se,clearDictionaryEntries:V,deleteDictionaryEntries:Y,getDictionarySettings:ne,getAppTask:te,replaceDictionaryEntries:ye,saveDictionaryEntries:be,searchDictionaryEntries:Fe,setDictionarySettings:xe,waitAppTask:we,customRequest:X,initIndex:function(e){return function(t){return ce(e)(t,{methods:{batch:_e,delete:Se,findAnswers:Le,getObject:Me,getObjects:ze,saveObject:et,saveObjects:tt,search:st,searchForFacetValues:ct,waitTask:ht,setSettings:ft,getSettings:Je,partialUpdateObject:Ke,partialUpdateObjects:Ge,deleteObject:He,deleteObjects:qe,deleteBy:Ae,clearObjects:Ne,browseObjects:Ee,getObjectPosition:Ue,findObject:Be,exists:$e,saveSynonym:it,saveSynonyms:at,getSynonym:We,searchSynonyms:ut,browseSynonyms:De,deleteSynonym:Ce,clearSynonyms:ke,replaceAllObjects:Xe,replaceAllSynonyms:Ye,searchRules:ot,getRule:Ve,deleteRule:Qe,saveRule:nt,saveRules:rt,replaceAllRules:Ze,browseRules:Oe,clearRules:Ie}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=u(p.WithinHeaders,e.appId,e.apiKey),i=D(n(n({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({appId:e.appId,transporter:i},e.methods)}(n(n(n({},a),e),{},{methods:{addABTest:S,getABTest:q,getABTests:Q,stopABTest:C,deleteABTest:H}}))}},initPersonalization:h,initRecommendation:function(){return function(e){return f.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),h()(e)}}}}))}return vt.version="4.13.0",vt}()},oe(ue={exports:{}},ue.exports),ue.exports),he=fe;function le(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function de(e,t){if(e===t)return e;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&"__proto__"!==n){var r=t[n],i=e[n];void 0!==i&&void 0===r||(le(i)&&le(r)?e[n]=de(i,r):e[n]="object"==typeof(a=r)&&null!==a?de(Array.isArray(a)?[]:{},a):a)}var a;return e}var me=function(e){le(e)||(e={});for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];le(r)&&de(e,r)}return e},pe=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight((function(e,t){return Object.keys(Object(t)).forEach((function(n){void 0!==t[n]&&(void 0!==e[n]&&delete e[n],e[n]=t[n])})),e}),{})};var ge=function(e,t){return e.filter((function(n,r){return t.indexOf(n)>-1&&e.indexOf(n)===r}))},ve=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]};var ye=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")};var Re=function(e,t){if(null===e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i};var be=function(e){return e&&Object.keys(e).length>0},Fe={addRefinement:function(e,t,n){if(Fe.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,pe({},a,e)},removeRefinement:function(e,t,n){if(void 0===n)return Fe.clearRefinement(e,(function(e,n){return t===n}));var r=""+n;return Fe.clearRefinement(e,(function(e,n){return t===n&&r===e}))},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return Fe.isRefined(e,t,n)?Fe.removeRefinement(e,t,n):Fe.addRefinement(e,t,n)},clearRefinement:function(e,t,n){if(void 0===t)return be(e)?{}:e;if("string"==typeof t)return Re(e,[t]);if("function"==typeof t){var r=!1,i=Object.keys(e).reduce((function(i,a){var s=e[a]||[],c=s.filter((function(e){return!t(e,a,n)}));return c.length!==s.length&&(r=!0),i[a]=c,i}),{});return r?i:e}},isRefined:function(e,t,n){var r=!!e[t]&&e[t].length>0;if(void 0===n||!r)return r;var i=""+n;return-1!==e[t].indexOf(i)}},je=Fe;function xe(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return xe(t[n],e)})):e===t}function Pe(e){var t,n=e?Pe._parseNumbers(e):{};void 0===n.userToken||null!==(t=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(t)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{};var r=this;Object.keys(n).forEach((function(e){var t=-1!==Pe.PARAMETERS.indexOf(e),i=void 0!==n[e];!t&&i&&(r[e]=n[e])}))}Pe.PARAMETERS=Object.keys(new Pe),Pe._parseNumbers=function(e){if(e instanceof Pe)return e;var t={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach((function(n){var r=e[n];if("string"==typeof r){var i=parseFloat(r);t[n]=isNaN(i)?r:i}})),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map((function(e){return Array.isArray(e)?e.map((function(e){return parseFloat(e)})):e}))),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t]||{};n[t]={},Object.keys(r).forEach((function(e){var i=r[e].map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e?parseFloat(e):e})):"string"==typeof e?parseFloat(e):e}));n[t][e]=i}))})),t.numericRefinements=n}return me({},e,t)},Pe.make=function(e){var t=new Pe(e);return(e.hierarchicalFacets||[]).forEach((function(e){if(e.rootPath){var n=t.getHierarchicalRefinement(e.name);n.length>0&&0!==n[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),0===(n=t.getHierarchicalRefinement(e.name)).length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}})),t},Pe.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&be(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):be(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},Pe.prototype={constructor:Pe,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:je.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:je.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:je.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:je.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=ye(n);if(this.isNumericRefined(e,t,r))return this;var i=me({},this.numericRefinements);return i[e]=me({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,n){return void 0!==n?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(r,i){return i===e&&r.op===t&&xe(r.val,ye(n))}))}):this:void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(n,r){return r===e&&n.op===t}))}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(t,n){return n===e}))}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(void 0===e)return be(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof e)return Re(this.numericRefinements,[e]);if("function"==typeof e){var t=!1,n=this.numericRefinements,r=Object.keys(n).reduce((function(r,i){var a=n[i],s={};return a=a||{},Object.keys(a).forEach((function(n){var r=a[n]||[],c=[];r.forEach((function(t){e({val:t,op:n},i,"numeric")||c.push(t)})),c.length!==r.length&&(t=!0),s[n]=c})),r[i]=s,r}),{});return t?r:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return je.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:je.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return je.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:je.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return je.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:je.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter((function(t){return t!==e}))}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter((function(t){return t!==e}))}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter((function(t){return t.name!==e}))}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return je.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:je.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return je.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:je.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return je.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:je.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.filter((function(t){return t!==e}))};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:je.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:je.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:je.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:pe({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:pe({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:pe({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&je.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&je.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&je.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var n=this.getHierarchicalRefinement(e);return t?-1!==n.indexOf(t):n.length>0},isNumericRefined:function(e,t,n){if(void 0===n&&void 0===t)return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===n||!r)return r;var i,a,s=ye(n),c=void 0!==(i=this.numericRefinements[e][t],a=s,ve(i,(function(e){return xe(e,a)})));return r&&c},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var e=this,t=ge(Object.keys(this.numericRefinements).filter((function(t){return Object.keys(e.numericRefinements[t]).length>0})),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter((function(t){return e.disjunctiveFacetsRefinements[t].length>0})).concat(t).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var e=this;return ge(this.hierarchicalFacets.map((function(e){return e.name})),Object.keys(this.hierarchicalFacetsRefinements).filter((function(t){return e.hierarchicalFacetsRefinements[t].length>0})))},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter((function(t){return-1===e.indexOf(t)}))},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={},n=this;return Object.keys(this).forEach((function(r){var i=n[r];-1===e.indexOf(r)&&void 0!==i&&(t[r]=i)})),t},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=Pe.validate(this,e);if(t)throw t;var n=this,r=Pe._parseNumbers(e),i=Object.keys(this).reduce((function(e,t){return e[t]=n[t],e}),{}),a=Object.keys(r).reduce((function(e,t){var n=void 0!==e[t],i=void 0!==r[t];return n&&!i?Re(e,[t]):(i&&(e[t]=r[t]),e)}),i);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return ve(this.hierarchicalFacets,(function(t){return t.name===e}))},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(n).map((function(e){return e.trim()}))},toString:function(){return JSON.stringify(this,null,2)}};var we=Pe;function _e(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,a=null===t;if(!a&&e>t||r&&i||!n)return 1;if(!r&&e<t||a&&n||!i)return-1}return 0}var Ee=function(e,t,n){if(!Array.isArray(e))return[];Array.isArray(n)||(n=[]);var r=e.map((function(e,n){return{criteria:t.map((function(t){return e[t]})),index:n,value:e}}));return r.sort((function(e,t){for(var r=-1;++r<e.criteria.length;){var i=_e(e.criteria[r],t.criteria[r]);if(i)return r>=n.length?i:"desc"===n[r]?-i:i}return e.index-t.index})),r.map((function(e){return e.value}))},Oe=function(e){return Array.isArray(e)?e.filter(Boolean):[]},De=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Te=function(e,t){var n=(t||[]).map((function(e){return e.split(":")}));return e.reduce((function(e,t){var r=t.split(":"),i=ve(n,(function(e){return e[0]===r[0]}));return r.length>1||!i?(e[0].push(r[0]),e[1].push(r[1]),e):(e[0].push(i[0]),e[1].push(i[1]),e)}),[[],[]])};var Ne=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},Ie=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")},ke=function(e){return function(t,n){var r=e.hierarchicalFacets[n],i=e.hierarchicalFacetsRefinements[r.name]&&e.hierarchicalFacetsRefinements[r.name][0]||"",a=e._getHierarchicalFacetSeparator(r),s=e._getHierarchicalRootPath(r),c=e._getHierarchicalShowParentLevel(r),o=Te(e._getHierarchicalFacetSortBy(r)),u=t.every((function(e){return e.exhaustive})),f=function(e,t,n,r,i){return function(a,s,c){var o=a;if(c>0){var u=0;for(o=a;u<c;){var f=o&&Array.isArray(o.data)?o.data:[];o=ve(f,(function(e){return e.isRefined})),u++}}if(o){var h=Object.keys(s.data).map((function(e){return[e,s.data[e]]})).filter((function(e){return function(e,t,n,r,i,a){if(i&&(0!==e.indexOf(i)||i===e))return!1;return!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(a||0===e.indexOf(n))}(e[0],o.path||n,i,t,n,r)}));o.data=Ee(h.map((function(e){var n=e[0];return function(e,t,n,r,i){var a=t.split(n);return{name:a[a.length-1].trim(),path:t,escapedValue:Ae(t),count:e,isRefined:r===t||0===r.indexOf(t+n),exhaustive:i,data:null}}(e[1],n,t,Se(i),s.exhaustive)})),e[0],e[1])}return a}}(o,a,s,c,i),h=t;return s&&(h=t.slice(s.split(a).length)),h.reduce(f,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:u,data:null})}},Ae=Ne,Se=Ie;var He=Ne,qe=Ie;function Qe(e){var t={};return e.forEach((function(e,n){t[e]=n})),t}function Ce(e,t,n){t&&t[n]&&(e.stats=t[n])}function $e(e,t,n){var r=t[0];this._rawResults=t;var i=this;Object.keys(r).forEach((function(e){i[e]=r[e]})),Object.keys(n||{}).forEach((function(e){i[e]=n[e]})),this.processingTimeMS=t.reduce((function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS}),0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map((function(){return[]})),this.facets=[];var a=e.getRefinedDisjunctiveFacets(),s=Qe(e.facets),c=Qe(e.disjunctiveFacets),o=1,u=r.facets||{};Object.keys(u).forEach((function(t){var n,a,o=u[t],f=(n=e.hierarchicalFacets,a=t,ve(n,(function(e){return(e.attributes||[]).indexOf(a)>-1})));if(f){var h=f.attributes.indexOf(t),l=De(e.hierarchicalFacets,(function(e){return e.name===f.name}));i.hierarchicalFacets[l][h]={attribute:t,data:o,exhaustive:r.exhaustiveFacetsCount}}else{var d,m=-1!==e.disjunctiveFacets.indexOf(t),p=-1!==e.facets.indexOf(t);m&&(d=c[t],i.disjunctiveFacets[d]={name:t,data:o,exhaustive:r.exhaustiveFacetsCount},Ce(i.disjunctiveFacets[d],r.facets_stats,t)),p&&(d=s[t],i.facets[d]={name:t,data:o,exhaustive:r.exhaustiveFacetsCount},Ce(i.facets[d],r.facets_stats,t))}})),this.hierarchicalFacets=Oe(this.hierarchicalFacets),a.forEach((function(n){var a=t[o],s=a&&a.facets?a.facets:{},u=e.getHierarchicalFacetByName(n);Object.keys(s).forEach((function(t){var n,o=s[t];if(u){n=De(e.hierarchicalFacets,(function(e){return e.name===u.name}));var f=De(i.hierarchicalFacets[n],(function(e){return e.attribute===t}));if(-1===f)return;i.hierarchicalFacets[n][f].data=me({},i.hierarchicalFacets[n][f].data,o)}else{n=c[t];var h=r.facets&&r.facets[t]||{};i.disjunctiveFacets[n]={name:t,data:pe({},o,h),exhaustive:a.exhaustiveFacetsCount},Ce(i.disjunctiveFacets[n],a.facets_stats,t),e.disjunctiveFacetsRefinements[t]&&e.disjunctiveFacetsRefinements[t].forEach((function(r){!i.disjunctiveFacets[n].data[r]&&e.disjunctiveFacetsRefinements[t].indexOf(qe(r))>-1&&(i.disjunctiveFacets[n].data[r]=0)}))}})),o++})),e.getRefinedHierarchicalFacets().forEach((function(n){var r=e.getHierarchicalFacetByName(n),a=e._getHierarchicalFacetSeparator(r),s=e.getHierarchicalRefinement(n);if(!(0===s.length||s[0].split(a).length<2)){var c=t[o],u=c&&c.facets?c.facets:{};Object.keys(u).forEach((function(t){var n=u[t],c=De(e.hierarchicalFacets,(function(e){return e.name===r.name})),o=De(i.hierarchicalFacets[c],(function(e){return e.attribute===t}));if(-1!==o){var f={};if(s.length>0){var h=s[0].split(a)[0];f[h]=i.hierarchicalFacets[c][o].data[h]}i.hierarchicalFacets[c][o].data=pe(f,n,i.hierarchicalFacets[c][o].data)}})),o++}})),Object.keys(e.facetsExcludes).forEach((function(t){var n=e.facetsExcludes[t],a=s[t];i.facets[a]={name:t,data:r.facets[t],exhaustive:r.exhaustiveFacetsCount},n.forEach((function(e){i.facets[a]=i.facets[a]||{name:t},i.facets[a].data=i.facets[a].data||{},i.facets[a].data[e]=0}))})),this.hierarchicalFacets=this.hierarchicalFacets.map(ke(e)),this.facets=Oe(this.facets),this.disjunctiveFacets=Oe(this.disjunctiveFacets),this._state=e}function Le(e,t,n,r){if(r=r||0,Array.isArray(t))return e(t,n[r]);if(!t.data||0===t.data.length)return t;var i=t.data.map((function(t){return Le(e,t,n,r+1)})),a=e(i,n[r]);return pe({data:a},t)}function Be(e,t){var n=ve(e,(function(e){return e.name===t}));return n&&n.stats}function Me(e,t,n,r,i){var a=ve(i,(function(e){return e.name===n})),s=a&&a.data&&a.data[r]?a.data[r]:0,c=a&&a.exhaustive||!1;return{type:t,attributeName:n,name:r,count:s,exhaustive:c}}$e.prototype.getFacetByName=function(e){function t(t){return t.name===e}return ve(this.facets,t)||ve(this.disjunctiveFacets,t)||ve(this.hierarchicalFacets,t)},$e.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],$e.prototype.getFacetValues=function(e,t){var n=function(e,t){function n(e){return e.name===t}if(e._state.isConjunctiveFacet(t)){var r=ve(e.facets,n);return r?Object.keys(r.data).map((function(n){var i=He(n);return{name:n,escapedValue:i,count:r.data[n],isRefined:e._state.isFacetRefined(t,i),isExcluded:e._state.isExcludeRefined(t,n)}})):[]}if(e._state.isDisjunctiveFacet(t)){var i=ve(e.disjunctiveFacets,n);return i?Object.keys(i.data).map((function(n){var r=He(n);return{name:n,escapedValue:r,count:i.data[n],isRefined:e._state.isDisjunctiveFacetRefined(t,r)}})):[]}if(e._state.isHierarchicalFacet(t))return ve(e.hierarchicalFacets,n)}(this,e);if(n){var r,i=pe({},t,{sortBy:$e.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),a=this;if(Array.isArray(n))r=[e];else r=a._state.getHierarchicalFacetByName(n.name).attributes;return Le((function(e,t){if(i.facetOrdering){var n=function(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}(a,t);if(Boolean(n))return function(e,t){var n=[],r=[],i=(t.order||[]).reduce((function(e,t,n){return e[t]=n,e}),{});e.forEach((function(e){var t=e.path||e.name;void 0!==i[t]?n[i[t]]=e:r.push(e)})),n=n.filter((function(e){return e}));var a,s=t.sortRemainingBy;return"hidden"===s?n:(a="alpha"===s?[["path","name"],["asc","asc"]]:[["count"],["desc"]],n.concat(Ee(r,a[0],a[1])))}(e,n)}if(Array.isArray(i.sortBy)){var r=Te(i.sortBy,$e.DEFAULT_SORT);return Ee(e,r[0],r[1])}if("function"==typeof i.sortBy)return function(e,t){return t.sort(e)}(i.sortBy,e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}),n,r)}},$e.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?Be(this.facets,e):this._state.isDisjunctiveFacet(e)?Be(this.disjunctiveFacets,e):void 0},$e.prototype.getRefinements=function(){var e=this._state,t=this,n=[];return Object.keys(e.facetsRefinements).forEach((function(r){e.facetsRefinements[r].forEach((function(i){n.push(Me(e,"facet",r,i,t.facets))}))})),Object.keys(e.facetsExcludes).forEach((function(r){e.facetsExcludes[r].forEach((function(i){n.push(Me(e,"exclude",r,i,t.facets))}))})),Object.keys(e.disjunctiveFacetsRefinements).forEach((function(r){e.disjunctiveFacetsRefinements[r].forEach((function(i){n.push(Me(e,"disjunctive",r,i,t.disjunctiveFacets))}))})),Object.keys(e.hierarchicalFacetsRefinements).forEach((function(r){e.hierarchicalFacetsRefinements[r].forEach((function(i){n.push(function(e,t,n,r){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),s=n.split(a),c=ve(r,(function(e){return e.name===t})),o=s.reduce((function(e,t){var n=e&&ve(e.data,(function(e){return e.name===t}));return void 0!==n?n:e}),c),u=o&&o.count||0,f=o&&o.exhaustive||!1,h=o&&o.path||"";return{type:"hierarchical",attributeName:t,name:h,count:u,exhaustive:f}}(e,r,i,t.hierarchicalFacets))}))})),Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t];Object.keys(r).forEach((function(e){r[e].forEach((function(r){n.push({type:"numeric",attributeName:t,name:r,numericValue:r,operator:e})}))}))})),e.tagRefinements.forEach((function(e){n.push({type:"tag",attributeName:"_tags",name:e})})),n};var Ue=$e;function ze(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Ve=ze;function Je(e){return"function"==typeof e}function We(e){return"object"==typeof e&&null!==e}function Ke(e){return void 0===e}ze.prototype._events=void 0,ze.prototype._maxListeners=void 0,ze.defaultMaxListeners=10,ze.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},ze.prototype.emit=function(e){var t,n,r,i,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||We(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(Ke(n=this._events[e]))return!1;if(Je(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(We(n))for(i=Array.prototype.slice.call(arguments,1),r=(s=n.slice()).length,a=0;a<r;a++)s[a].apply(this,i);return!0},ze.prototype.addListener=function(e,t){var n;if(!Je(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Je(t.listener)?t.listener:t),this._events[e]?We(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,We(this._events[e])&&!this._events[e].warned&&(n=Ke(this._maxListeners)?ze.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},ze.prototype.on=ze.prototype.addListener,ze.prototype.once=function(e,t){if(!Je(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},ze.prototype.removeListener=function(e,t){var n,r,i,a;if(!Je(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||Je(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(We(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},ze.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(Je(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},ze.prototype.listeners=function(e){return this._events&&this._events[e]?Je(this._events[e])?[this._events[e]]:this._events[e].slice():[]},ze.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Je(t))return 1;if(t)return t.length}return 0},ze.listenerCount=function(e,t){return e.listenerCount(t)};var Ge=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function Xe(e,t){this.main=e,this.fn=t,this.lastResults=null}Ge(Xe,Ve),Xe.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},Xe.prototype.getModifiedState=function(e){return this.fn(e)};var Ze=Xe,Ye={_getQueries:function(e,t){var n=[];return n.push({indexName:e,params:Ye._getHitsSearchParams(t)}),t.getRefinedDisjunctiveFacets().forEach((function(r){n.push({indexName:e,params:Ye._getDisjunctiveFacetSearchParams(t,r)})})),t.getRefinedHierarchicalFacets().forEach((function(r){var i=t.getHierarchicalFacetByName(r),a=t.getHierarchicalRefinement(r),s=t._getHierarchicalFacetSeparator(i);a.length>0&&a[0].split(s).length>1&&n.push({indexName:e,params:Ye._getDisjunctiveFacetSearchParams(t,r,!0)})})),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(Ye._getHitsHierarchicalFacetsAttributes(e)),n=Ye._getFacetFilters(e),r=Ye._getNumericFilters(e),i=Ye._getTagFilters(e),a={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:i};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),me({},e.getQueryParams(),a)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=Ye._getFacetFilters(e,t,n),i=Ye._getNumericFilters(e,t),a={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:Ye._getTagFilters(e),analytics:!1,clickAnalytics:!1},s=e.getHierarchicalFacetByName(t);return a.facets=s?Ye._getDisjunctiveHierarchicalFacetAttribute(e,s,n):t,i.length>0&&(a.numericFilters=i),r.length>0&&(a.facetFilters=r),me({},e.getQueryParams(),a)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var n=[];return Object.keys(e.numericRefinements).forEach((function(r){var i=e.numericRefinements[r]||{};Object.keys(i).forEach((function(e){var a=i[e]||[];t!==r&&a.forEach((function(t){if(Array.isArray(t)){var i=t.map((function(t){return r+e+t}));n.push(i)}else n.push(r+e+t)}))}))})),n},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,n){var r=[],i=e.facetsRefinements||{};Object.keys(i).forEach((function(e){(i[e]||[]).forEach((function(t){r.push(e+":"+t)}))}));var a=e.facetsExcludes||{};Object.keys(a).forEach((function(e){(a[e]||[]).forEach((function(t){r.push(e+":-"+t)}))}));var s=e.disjunctiveFacetsRefinements||{};Object.keys(s).forEach((function(e){var n=s[e]||[];if(e!==t&&n&&0!==n.length){var i=[];n.forEach((function(t){i.push(e+":"+t)})),r.push(i)}}));var c=e.hierarchicalFacetsRefinements||{};return Object.keys(c).forEach((function(i){var a=(c[i]||[])[0];if(void 0!==a){var s,o,u=e.getHierarchicalFacetByName(i),f=e._getHierarchicalFacetSeparator(u),h=e._getHierarchicalRootPath(u);if(t===i){if(-1===a.indexOf(f)||!h&&!0===n||h&&h.split(f).length===a.split(f).length)return;h?(o=h.split(f).length-1,a=h):(o=a.split(f).length-2,a=a.slice(0,a.lastIndexOf(f))),s=u.attributes[o]}else o=a.split(f).length-1,s=u.attributes[o];s&&r.push([s+":"+a])}})),r},_getHitsHierarchicalFacetsAttributes:function(e){return e.hierarchicalFacets.reduce((function(t,n){var r=e.getHierarchicalRefinement(n.name)[0];if(!r)return t.push(n.attributes[0]),t;var i=e._getHierarchicalFacetSeparator(n),a=r.split(i).length,s=n.attributes.slice(0,a+1);return t.concat(s)}),[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),me({},Ye._getHitsSearchParams(i),a)}},et=Ye,tt="3.8.2",nt=Ne;function rt(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.8.2)"),this.setClient(e);var r=n||{};r.index=t,this.state=we.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function it(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function at(){return this.state.page}Ge(rt,Ve),rt.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},rt.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},rt.prototype.getQuery=function(){var e=this.state;return et._getHitsSearchParams(e)},rt.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=et._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(r).then((function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new Ue(n,e.results),state:n,_originalResponse:e}}),(function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e}));this.client.search(r).then((function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new Ue(n,e.results),n)})).catch((function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)}))},rt.prototype.findAnswers=function(e){var t=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(t),i=me({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:Re(et._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(a);var s=this.client.initIndex(r.index);if("function"!=typeof s.findAnswers)throw new Error(a);return s.findAnswers(r.query,e.queryLanguages,i)},rt.prototype.searchForFacetValues=function(e,t,n,r){var i="function"==typeof this.client.searchForFacetValues;if(!i&&"function"!=typeof this.client.initIndex)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),s=a.isDisjunctiveFacet(e),c=et.getSearchForFacetQuery(e,t,n,a);this._currentNbQueries++;var o=this;return this.emit("searchForFacetValues",{state:a,facet:e,query:t}),(i?this.client.searchForFacetValues([{indexName:a.index,params:c}]):this.client.initIndex(a.index).searchForFacetValues(c)).then((function(t){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(t=Array.isArray(t)?t[0]:t).facetHits.forEach((function(t){t.escapedValue=nt(t.value),t.isRefined=s?a.isDisjunctiveFacetRefined(e,t.escapedValue):a.isFacetRefined(e,t.escapedValue)})),t}),(function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e}))},rt.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},rt.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},rt.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},rt.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},rt.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},rt.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},rt.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},rt.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},rt.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},rt.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},rt.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},rt.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},rt.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},rt.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},rt.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},rt.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},rt.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},rt.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},rt.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},rt.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},rt.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},rt.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},rt.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},rt.prototype.setCurrentPage=it,rt.prototype.setPage=it,rt.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},rt.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},rt.prototype.setState=function(e){return this._change({state:we.make(e),isPageReset:!1}),this},rt.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new we(e),this},rt.prototype.hasRefinements=function(e){return!!be(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},rt.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},rt.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},rt.prototype.hasTag=function(e){return this.state.isTagRefined(e)},rt.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},rt.prototype.getIndex=function(){return this.state.index},rt.prototype.getCurrentPage=at,rt.prototype.getPage=at,rt.prototype.getTags=function(){return this.state.tagRefinements},rt.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e))this.state.getConjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"conjunctive"})})),this.state.getExcludeRefinements(e).forEach((function(e){t.push({value:e,type:"exclude"})}));else if(this.state.isDisjunctiveFacet(e)){this.state.getDisjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"disjunctive"})}))}var n=this.state.getNumericRefinements(e);return Object.keys(n).forEach((function(e){var r=n[e];t.push({value:r,operator:e,type:"numeric"})})),t},rt.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},rt.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},rt.prototype._search=function(e){var t=this.state,n=[],r=[];e.onlyWithDerivedHelpers||(r=et._getQueries(t.index,t),n.push({state:t,queriesCount:r.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map((function(e){var r=e.getModifiedState(t),i=et._getQueries(r.index,r);return n.push({state:r,queriesCount:i.length,helper:e}),e.emit("search",{state:r,results:e.lastResults}),i})),a=Array.prototype.concat.apply(r,i),s=this._queryId++;this._currentNbQueries++;try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,s)).catch(this._dispatchAlgoliaError.bind(this,s))}catch(e){this.emit("error",{error:e})}},rt.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results.slice();e.forEach((function(e){var t=e.state,n=e.queriesCount,i=e.helper,a=r.splice(0,n),s=i.lastResults=new Ue(t,a);i.emit("result",{results:s,state:t})}))}},rt.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},rt.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},rt.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},rt.prototype._change=function(e){var t=e.state,n=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))},rt.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},rt.prototype.setClient=function(e){return this.client===e||("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.8.2)"),this.client=e),this},rt.prototype.getClient=function(){return this.client},rt.prototype.derive=function(e){var t=new Ze(this,e);return this.derivedHelpers.push(t),t},rt.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},rt.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var st=rt;function ct(e,t,n){return new st(e,t,n)}ct.version=tt,ct.AlgoliaSearchHelper=st,ct.SearchParameters=we,ct.SearchResults=Ue;var ot=ct;function ut(e,t,n){const r=e.slice();return r[8]=t[n],r}function ft(e,t,n){const r=e.slice();return r[11]=t[n],r}function ht(e){let t,n;return t=new te({props:{facets:e[11],results:e[0],helper:e[3]}}),{c(){C(t.$$.fragment)},m(e,r){$(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.results=e[0]),t.$set(r)},i(e){n||(q(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function lt(e){let t,n,r,i,a,s,c=e[0].nbHits+"",o=e[0].processingTimeMS/1e3+"";return{c(){t=d("span"),n=m(c),r=m(" results found"),i=m(" in "),a=m(o),s=m(" seconds"),y(t,"class","svelte-bjvu3j")},m(e,c){f(e,t,c),u(t,n),u(t,r),f(e,i,c),f(e,a,c),f(e,s,c)},p(e,t){1&t&&c!==(c=e[0].nbHits+"")&&R(n,c),1&t&&o!==(o=e[0].processingTimeMS/1e3+"")&&R(a,o)},d(e){e&&h(t),e&&h(i),e&&h(a),e&&h(s)}}}function dt(e){let t,n,r=e[0].hits,i=[];for(let t=0;t<r.length;t+=1)i[t]=mt(ut(e,r,t));const a=e=>Q(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=g()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);f(e,t,r),n=!0},p(e,n){if(1&n){let s;for(r=e[0].hits,s=0;s<r.length;s+=1){const a=ut(e,r,s);i[s]?(i[s].p(a,n),q(i[s],1)):(i[s]=mt(a),i[s].c(),q(i[s],1),i[s].m(t.parentNode,t))}for(S(),s=r.length;s<i.length;s+=1)a(s);H()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)q(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Q(i[e]);n=!1},d(e){l(i,e),e&&h(t)}}}function mt(e){let t,n;return t=new ce({props:{hit:e[8]._highlightResult}}),{c(){C(t.$$.fragment)},m(e,r){$(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.hit=e[8]._highlightResult),t.$set(r)},i(e){n||(q(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){L(t,e)}}}function pt(e){let t,n,i,a,s,c,o,m,g,R,F,j,x,P=e[2],w=[];for(let t=0;t<P.length;t+=1)w[t]=ht(ft(e,P,t));const _=e=>Q(w[e],1,1,(()=>{w[e]=null}));let E=e[0]&&lt(e),O=e[0]&&dt(e);return{c(){t=d("div"),n=d("input"),i=p(),a=d("div"),s=d("div");for(let e=0;e<w.length;e+=1)w[e].c();c=p(),o=d("div"),m=d("div"),E&&E.c(),g=p(),R=d("ul"),O&&O.c(),y(n,"type","text"),y(n,"autocomplete","off"),y(n,"id","search-box"),y(n,"placeholder","Search for restaurants by name, cuisine, location..."),y(n,"class","svelte-bjvu3j"),y(t,"class","input-wrapper svelte-bjvu3j"),y(s,"id","facet-container"),y(m,"id","results-title"),y(m,"class","svelte-bjvu3j"),y(R,"id","container"),y(R,"class","svelte-bjvu3j"),y(o,"id","results-wrapper"),y(a,"id","wrapper"),y(a,"class","svelte-bjvu3j")},m(r,h){f(r,t,h),u(t,n),b(n,e[1]),f(r,i,h),f(r,a,h),u(a,s);for(let e=0;e<w.length;e+=1)w[e].m(s,null);u(a,c),u(a,o),u(o,m),E&&E.m(m,null),u(o,g),u(o,R),O&&O.m(R,null),F=!0,j||(x=[v(n,"input",e[5]),v(n,"keyup",e[4])],j=!0)},p(e,[t]){if(2&t&&n.value!==e[1]&&b(n,e[1]),13&t){let n;for(P=e[2],n=0;n<P.length;n+=1){const r=ft(e,P,n);w[n]?(w[n].p(r,t),q(w[n],1)):(w[n]=ht(r),w[n].c(),q(w[n],1),w[n].m(s,null))}for(S(),n=P.length;n<w.length;n+=1)_(n);H()}e[0]?E?E.p(e,t):(E=lt(e),E.c(),E.m(m,null)):E&&(E.d(1),E=null),e[0]?O?(O.p(e,t),1&t&&q(O,1)):(O=dt(e),O.c(),q(O,1),O.m(R,null)):O&&(S(),Q(O,1,1,(()=>{O=null})),H())},i(e){if(!F){for(let e=0;e<P.length;e+=1)q(w[e]);q(O),F=!0}},o(e){w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)Q(w[e]);Q(O),F=!1},d(e){e&&h(t),e&&h(i),e&&h(a),l(w,e),E&&E.d(),O&&O.d(),j=!1,r(x)}}}function gt(e,t,n){const r=[{name:"food_type",label:"Cuisine/Food Type"},{name:"dining_style",label:"Dining Style"},{name:"stars_count",label:"Rating"},{name:"price_range",label:"Price Range"},{name:"payment_options",label:"Payment Options"}],i=r.map((e=>e.name)),a=he("1865UEERBB","13ca6cfc9771cbec1d5bdb4aec7d570b"),s=ot(a,"Test",{disjunctiveFacets:i});let c;s.search(),fetch("http://myexternalip.com/raw").then((e=>e.text())).then((e=>fetch(`http://ip-api.com/json/${e}`))).then((e=>e.json())).then((({lat:e,lon:t})=>{s.setQueryParameter("aroundLatLng",`${e},${t}`),s.search()})),navigator.geolocation.watchPosition((({coords:{latitude:e,longitude:t}})=>{s.setQueryParameter("aroundLatLng",`${e},${t}`),s.search()})),s.on("result",(({results:e})=>{n(0,c=e)}));let o="";return[c,o,r,s,()=>{s.setQuery(o),s.search()},function(){o=this.value,n(1,o)}]}return new class extends U{constructor(e){super(),M(this,e,gt,pt,a,{})}}({target:document.body,props:{name:"fizz buzz"}})}();
//# sourceMappingURL=bundle.js.map
